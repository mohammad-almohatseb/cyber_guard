from fastapi import FastAPI
from app.config.mongodb import db
from app.api.requests.request_flow import router as request_flow_router

app = FastAPI(
    title="CyberGuard PTaaS",
    description="This Swagger documentation is generated by FastAPI",
    debug=True
)

# Test Connection
try:
    db.admin.command("ping")
    print("MongoDB connected successfully!")
except Exception as e:
    print("MongoDB connection failed:", e)

app.include_router(request_flow_router, prefix="/api", tags=["Request Flow"])

@app.get("/")
async def root():
    return {"message": "Welcome to CyberGuard PTaaS"}
